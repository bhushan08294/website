<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <meta name="google-signin-client_id" content="724129437504-rknf43oc3t4k3cs505dhv9snbe4vjjv0.apps.googleusercontent.com">
  <title>Login</title>
  <link rel="stylesheet" type="text/css" href="stylesheet/main.css">
  <link rel="stylesheet" type="text/css" href="stylesheet/w3.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<script src="https://apis.google.com/js/platform.js" async defer></script>
<script>
var baseURL = "http://whiteboard.dbsprojects.ie:8080/"

function fetch(completeURL)
{
	return new Promise(function(resolve, reject) 
	{
		var xhr = new XMLHttpRequest();
		xhr.open("GET", completeURL, true);
  
		xhr.onreadystatechange = function() 
		{
			if (xhr.readyState == XMLHttpRequest.DONE) 
			{
				resolve(JSON.parse(this.responseText));
			}
			if(xhr.status != 200)
			{
				reject("Error");
			}
		};
				xhr.send();
	})
};

  function onSignIn(googleUser)
  {
    let profile = googleUser.getBasicProfile();
    alert('ID: ' + profile.getId());
    alert('Name: ' + profile.getName());
    alert('Image URL: ' + profile.getImageUrl());
    alert('Email: ' + profile.getEmail());
    //call verify
  }
  function signOut() {
    var auth2 = gapi.auth2.getAuthInstance();
    auth2.signOut().then(function () {
      console.log('User signed out.');
    });
  }
  function onRegister(googleUser)
  {
    let profile = googleUser.getBasicProfile();
    alert('ID: ' + profile.getId());
    let name= profile.getName();
    alert('Image URL: ' + profile.getImageUrl());
    let email= profile.getEmail();
    let completeURL=baseURL+'addUser?name='+name+'&email='+email;
    fetch(completeURL).then(function(provided){
    	/check it's success, otherwise report error
    })
  }
</script>
  </head>
  <div class="header">&nbsp;</div>
  <script src='javascripts/main.js'></script>
<body>
 <div class="g-signin2" data-onsuccess="onSignIn"></div>
<a href="index.html" onclick="signOut();">Sign out</a>
<br>
<a href="https://forms.gle/VJPCHrpKpyESQJ2s7" color= "white">Sign Up now for free</a>
<iframe src="https://docs.google.com/forms/d/e/1FAIpQLSdMg1vfM15eVgX8kBS9A_axuuq05X6wUBY-5SO2g9zW0RHD1A/viewform?embedded=true" width="480" height="720" frameborder="0" marginheight="0" marginwidth="0">Loadingâ€¦</iframe>
</body>
</html>